


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             datos, DATA
    2 00000000         
    3 00000000 00000006 
                       NUM_FILAS
                               EQU              6
    4 00000000 00000007 
                       NUM_COLUMNAS
                               EQU              7
    5 00000000 00000001 
                       PADDING_FIL
                               EQU              1
    6 00000000 00000001 
                       PADDING_COL
                               EQU              1
    7 00000000 00000007 
                       TAM_FILS
                               EQU              NUM_FILAS + PADDING_FIL
    8 00000000 00000008 
                       TAM_COLS
                               EQU              NUM_COLUMNAS + PADDING_COL
    9 00000000         
   10 00000000 00000004 
                       CELDA_VACIA
                               EQU              0x04
   11 00000000 00000003 
                       CELDA_COLOR
                               EQU              0x03
   12 00000000         
   13 00000000 00000000 
                       FALSE   EQU              0
   14 00000000 00000001 
                       TRUE    EQU              1
   15 00000000         
   16 00000000 00 FF FF 
              01       deltas_fila
                               DCB              0, -1, -1, 1
   17 00000004 FF 00 FF 
              FF       deltas_columna
                               DCB              -1, 0, -1, -1
   18 00000008         
   19 00000008                 AREA             codigo, CODE
   20 00000000         
   21 00000000                 IMPORT           conecta4_buscar_alineamiento_c
   22 00000000                 PRESERVE8        {TRUE}
   23 00000000         
   24 00000000                 EXPORT           conecta4_hay_linea_asm_c
   25 00000000         
   26 00000000         
   27 00000000         ;   Entrada:
   28 00000000         ;       r0 -> @cuadricula
   29 00000000         ;       r1 -> fila
   30 00000000         ;       r2 -> columna
   31 00000000         ;       r3 -> color
   32 00000000         ;
   33 00000000         ;   Salida
   34 00000000         ;       r0 <- >= 1 si hay linea, 0 si no hay linea
   35 00000000         ;
   36 00000000         ;   Descrir15ión
   37 00000000         ;



ARM Macro Assembler    Page 2 


   38 00000000         ;    
   39 00000000         
   40 00000000         conecta4_hay_linea_asm_c
   41 00000000         ; Prologo
   42 00000000 E1A0C00D        mov              r12, r13
   43 00000004 E92DDFF0        stmdb            r13!, { r4 - r10, r11, r12, r14
, r15 }
   44 00000008 E24CB004        sub              r11, r12, #4
   45 0000000C         
   46 0000000C         ;   Bloque de activación:
   47 0000000C         ;
   48 0000000C         ;   r13' ->  r4 - r10        hay_linea
   49 0000000C         ;           r11
   50 0000000C         ;           r13
   51 0000000C         ;           r14
   52 0000000C         ;   r11' ->  r15
   53 0000000C         ;           --------------
   54 0000000C         ;                           C4_verificar_4_en_linea
   55 0000000C         
   56 0000000C         ; Mueve parametros a registros variables
   57 0000000C E1A04000        mov              r4, r0      ; r4 = @cuadricula
   58 00000010 E1A05001        mov              r5, r1      ; r5 = fila
   59 00000014 E1A06002        mov              r6, r2      ; r6 = columna
   60 00000018 E1A07003        mov              r7, r3      ; r7 = color
   61 0000001C         
   62 0000001C         ; Inicializa variables
   63 0000001C E3A08000        mov              r8, #0      ; i              
   64 00000020 E3A09000        mov              r9, #0      ; linea
   65 00000024 E3A0A000        mov              r10, #0     ; long_linea
   66 00000028         
   67 00000028         ; for()
   68 00000028         ;   i < 4
   69 00000028 E3580004 
                       hl1_for cmp              r8, #4
   70 0000002C AA00001D        bge              hl1_return
   71 00000030         ;   linea == FALSE
   72 00000030 E3590000        cmp              r9, #FALSE
   73 00000034 1A00001B        bne              hl1_return
   74 00000038         
   75 00000038         ;   Obtiene deltas[i]
   76 00000038         
   77 00000038 E59F0070        LDR              r0, =deltas_fila
   78 0000003C E19000D8        ldrsb            r0, [r0, r8]
   79 00000040 E59F106C        LDR              r1, =deltas_columna
   80 00000044 E19110D8        ldrsb            r1, [r1, r8]
   81 00000048         
   82 00000048         ;   Prepara primera llamada a buscar_alineamiento
   83 00000048         
   84 00000048 E92D0003        stmdb            r13!, {r0, r1}
   85 0000004C E1A00004        mov              r0, r4
   86 00000050 E1A01005        mov              r1, r5
   87 00000054 E1A02006        mov              r2, r6
   88 00000058 E1A03007        mov              r3, r7
   89 0000005C         
   90 0000005C EBFFFFFE        bl               conecta4_buscar_alineamiento_c
   91 00000060         
   92 00000060         ;   linea = long_linea >= 4
   93 00000060 E1A0A000        mov              r10, r0
   94 00000064 E35A0004        cmp              r10, #4



ARM Macro Assembler    Page 3 


   95 00000068 A3A09001        movge            r9, #TRUE
   96 0000006C AAFFFFED        bge              hl1_for
   97 00000070         
   98 00000070         ;   Prepara segunda llamada a buscar_alineamiento
   99 00000070         
  100 00000070         ;   Recupera y niega deltas
  101 00000070 E8BD0009        ldmia            r13!, { r0, r3 }
  102 00000074 E2600000        rsb              r0, r0, #0
  103 00000078 E2633000        rsb              r3, r3, #0
  104 0000007C         
  105 0000007C         ;   fila - deltas_filas[i], columnas - deltas_columna[i]
                       
  106 0000007C E0851000        add              r1, r5, r0
  107 00000080 E0862003        add              r2, r6, r3
  108 00000084         
  109 00000084         ;   Apila -deltas
  110 00000084 E92D0009        stmdb            r13!, { r0, r3 }
  111 00000088         
  112 00000088         ; cuadricula y color
  113 00000088 E1A00004        mov              r0, r4
  114 0000008C E1A03007        mov              r3, r7
  115 00000090         
  116 00000090 EBFFFFFE        bl               conecta4_buscar_alineamiento_c
  117 00000094         
  118 00000094         ;   linea = long_linea >= 4
  119 00000094 E08AA000        add              r10, r10, r0
  120 00000098 E35A0004        cmp              r10, #4
  121 0000009C A3A09001        movge            r9, #TRUE
  122 000000A0         
  123 000000A0         ;   i++
  124 000000A0 E2888001        add              r8, r8, #1
  125 000000A4         
  126 000000A4 EAFFFFDF        b                hl1_for
  127 000000A8         
  128 000000A8 E1A00009 
                       hl1_return
                               mov              r0, r9
  129 000000AC E91BAFF0        ldmdb            r11, { r4 - r10, r11, r13, r15 
}
  130 000000B0         
  131 000000B0                 END
              00000000 
              00000000 
Command Line: --debug --xref --diag_suppress=9931 --apcs=interwork --depend=.\o
bjects\conecta4_hay_llinea_asm_c.d -o.\objects\conecta4_hay_llinea_asm_c.o -IC:
\Keil_v5\ARM\RV31\INC -IC:\Keil_v5\ARM\CMSIS\Include -IC:\Keil_v5\ARM\INC\Phili
ps --predefine="__EVAL SETA 1" --predefine="__UVISION_VERSION SETA 526" --list=
.\listings\conecta4_hay_llinea_asm_c.lst conecta4_hay_llinea_asm_c.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

datos 00000000

Symbol: datos
   Definitions
      At line 1 in file conecta4_hay_llinea_asm_c.s
   Uses
      None
Comment: datos unused
deltas_columna 00000004

Symbol: deltas_columna
   Definitions
      At line 17 in file conecta4_hay_llinea_asm_c.s
   Uses
      At line 79 in file conecta4_hay_llinea_asm_c.s
Comment: deltas_columna used once
deltas_fila 00000000

Symbol: deltas_fila
   Definitions
      At line 16 in file conecta4_hay_llinea_asm_c.s
   Uses
      At line 77 in file conecta4_hay_llinea_asm_c.s
Comment: deltas_fila used once
3 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

codigo 00000000

Symbol: codigo
   Definitions
      At line 19 in file conecta4_hay_llinea_asm_c.s
   Uses
      None
Comment: codigo unused
conecta4_hay_linea_asm_c 00000000

Symbol: conecta4_hay_linea_asm_c
   Definitions
      At line 40 in file conecta4_hay_llinea_asm_c.s
   Uses
      At line 24 in file conecta4_hay_llinea_asm_c.s
Comment: conecta4_hay_linea_asm_c used once
hl1_for 00000028

Symbol: hl1_for
   Definitions
      At line 69 in file conecta4_hay_llinea_asm_c.s
   Uses
      At line 96 in file conecta4_hay_llinea_asm_c.s
      At line 126 in file conecta4_hay_llinea_asm_c.s

hl1_return 000000A8

Symbol: hl1_return
   Definitions
      At line 128 in file conecta4_hay_llinea_asm_c.s
   Uses
      At line 70 in file conecta4_hay_llinea_asm_c.s
      At line 73 in file conecta4_hay_llinea_asm_c.s

4 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

CELDA_COLOR 00000003

Symbol: CELDA_COLOR
   Definitions
      At line 11 in file conecta4_hay_llinea_asm_c.s
   Uses
      None
Comment: CELDA_COLOR unused
CELDA_VACIA 00000004

Symbol: CELDA_VACIA
   Definitions
      At line 10 in file conecta4_hay_llinea_asm_c.s
   Uses
      None
Comment: CELDA_VACIA unused
FALSE 00000000

Symbol: FALSE
   Definitions
      At line 13 in file conecta4_hay_llinea_asm_c.s
   Uses
      At line 72 in file conecta4_hay_llinea_asm_c.s
Comment: FALSE used once
NUM_COLUMNAS 00000007

Symbol: NUM_COLUMNAS
   Definitions
      At line 4 in file conecta4_hay_llinea_asm_c.s
   Uses
      At line 8 in file conecta4_hay_llinea_asm_c.s
Comment: NUM_COLUMNAS used once
NUM_FILAS 00000006

Symbol: NUM_FILAS
   Definitions
      At line 3 in file conecta4_hay_llinea_asm_c.s
   Uses
      At line 7 in file conecta4_hay_llinea_asm_c.s
Comment: NUM_FILAS used once
PADDING_COL 00000001

Symbol: PADDING_COL
   Definitions
      At line 6 in file conecta4_hay_llinea_asm_c.s
   Uses
      At line 8 in file conecta4_hay_llinea_asm_c.s
Comment: PADDING_COL used once
PADDING_FIL 00000001

Symbol: PADDING_FIL
   Definitions
      At line 5 in file conecta4_hay_llinea_asm_c.s
   Uses
      At line 7 in file conecta4_hay_llinea_asm_c.s
Comment: PADDING_FIL used once
TAM_COLS 00000008

Symbol: TAM_COLS



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

   Definitions
      At line 8 in file conecta4_hay_llinea_asm_c.s
   Uses
      None
Comment: TAM_COLS unused
TAM_FILS 00000007

Symbol: TAM_FILS
   Definitions
      At line 7 in file conecta4_hay_llinea_asm_c.s
   Uses
      None
Comment: TAM_FILS unused
TRUE 00000001

Symbol: TRUE
   Definitions
      At line 14 in file conecta4_hay_llinea_asm_c.s
   Uses
      At line 95 in file conecta4_hay_llinea_asm_c.s
      At line 121 in file conecta4_hay_llinea_asm_c.s

10 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

conecta4_buscar_alineamiento_c 00000000

Symbol: conecta4_buscar_alineamiento_c
   Definitions
      At line 21 in file conecta4_hay_llinea_asm_c.s
   Uses
      At line 90 in file conecta4_hay_llinea_asm_c.s
      At line 116 in file conecta4_hay_llinea_asm_c.s

1 symbol
352 symbols in table
