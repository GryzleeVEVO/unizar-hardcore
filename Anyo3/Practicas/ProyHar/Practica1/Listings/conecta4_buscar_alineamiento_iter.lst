


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             datos, DATA
    2 00000000         
    3 00000000 00000006 
                       NUM_FILAS
                               EQU              6
    4 00000000 00000007 
                       NUM_COLUMNAS
                               EQU              7
    5 00000000 00000001 
                       PADDING_FIL
                               EQU              1
    6 00000000 00000001 
                       PADDING_COL
                               EQU              1
    7 00000000 00000007 
                       TAM_FILS
                               EQU              NUM_FILAS + PADDING_FIL
    8 00000000 00000008 
                       TAM_COLS
                               EQU              NUM_COLUMNAS + PADDING_COL
    9 00000000         
   10 00000000 00000004 
                       CELDA_VACIA
                               EQU              0x04
   11 00000000 00000003 
                       CELDA_COLOR
                               EQU              0x03
   12 00000000         
   13 00000000 00000000 
                       FALSE   EQU              0
   14 00000000 00000001 
                       TRUE    EQU              1
   15 00000000         
   16 00000000                 AREA             codigo, CODE
   17 00000000         
   18 00000000                 EXPORT           conecta4_buscar_alineamiento_as
m_iter
   19 00000000         
   20 00000000         ;   Entrada:
   21 00000000         ;       r0 -> @cuadricula
   22 00000000         ;       r1 -> fila
   23 00000000         ;       r2 -> columna
   24 00000000         ;       r3 -> color
   25 00000000         ;       r11 + 4 -> *deltas_fila[i]
   26 00000000         ;       r11 + 8 -> *deltas_columna[i]
   27 00000000         ;
   28 00000000         ;   Salida
   29 00000000         ;       r0 <- longuitud linea
   30 00000000         ;
   31 00000000         ;   Descripción
   32 00000000         ;
   33 00000000         ;       Devuelve el número de celdas del mismo color con
                       secutivas en
   34 00000000         ;       la línea recta dada por delta_fila y delta_colum
                       na a partir de 
   35 00000000         ;       cuadricula[fila][columna]
   36 00000000         
   37 00000000         conecta4_buscar_alineamiento_asm_iter
   38 00000000         ; Prologo



ARM Macro Assembler    Page 2 


   39 00000000 E1A0C00D        mov              r12, r13
   40 00000004 E92DDFF0        stmdb            r13!, { r4 - r10, r11, r12, r14
, r15 }
   41 00000008 E24CB004        sub              r11, r12, #4
   42 0000000C         
   43 0000000C         ;   Bloque de activación:
   44 0000000C         ;
   45 0000000C         ;   r13' ->  r4 - r10        buscar_alineamiento
   46 0000000C         ;           r11
   47 0000000C         ;           r13
   48 0000000C         ;           r14
   49 0000000C         ;   r11' ->  r15
   50 0000000C         ;           --------------
   51 0000000C         ;           delta_fila[i]   hay_linea
   52 0000000C         ;           delta_columna[i]
   53 0000000C         
   54 0000000C         ; Mueve parametros a registros variables
   55 0000000C E1A04000        mov              r4, r0      ; r4 = @cuadricula
   56 00000010 E1A05001        mov              r5, r1      ; r5 = fila
   57 00000014 E1A06002        mov              r6, r2      ; r6 = columna
   58 00000018 E1A07003        mov              r7, r3      ; r7 = color
   59 0000001C E28B9004        add              r9, r11, #0x04 ; Calcula @ base
                                                             de parametros
   60 00000020 E8990300        ldmia            r9, { r8 - r9 } ; r8, r9 = delt
                                                            a_columna, delta_fi
                                                            la
   61 00000024 E3A00000        mov              r0 , #0     ; i = num lineas en
                                                            contradas
   62 00000028         
   63 00000028         
   64 00000028         ; while
   65 00000028         ;   !C4_fila_valida(fila) (! 1 <= fila <= NUM_FILAS)
   66 00000028 E3550001 
                       ba_while
                               cmp              r5, #1
   67 0000002C BA000011        blt              ba_return_zero
   68 00000030 E3550006        cmp              r5, #NUM_FILAS
   69 00000034 CA00000F        bgt              ba_return_zero
   70 00000038         
   71 00000038         ;   !C4_columna_valida(columna)) (! 1 <= columna <= NUM_
                       COLUMNAS)
   72 00000038 E3560001        cmp              r6, #1
   73 0000003C BA00000D        blt              ba_return_zero
   74 00000040 E3560007        cmp              r6, #NUM_COLUMNAS
   75 00000044 CA00000B        bgt              ba_return_zero
   76 00000048         
   77 00000048         
   78 00000048         ;   Obtiene valor de celda en cuadricula[fila][columna]
   79 00000048 E084A185        add              r10, r4, r5, lsl #3 ; r10 = @cu
                                                            adricula[fila][0] (
                                                            @cuad + 8 * filas)
   80 0000004C E7DAA006        ldrb             r10, [r10, r6] ; r10 = *cuadric
                                                            ula[fila][columna]
   81 00000050         
   82 00000050         ;   celda_vacia(cuadricula[fila][columna]) ( celda & 0x0
                       4 == 0)
   83 00000050         
   84 00000050 E20A3004        and              r3, r10, #CELDA_VACIA
   85 00000054 E3530000        cmp              r3, #0



ARM Macro Assembler    Page 3 


   86 00000058 0A000006        beq              ba_return_zero
   87 0000005C         
   88 0000005C         ;   celda_color(cuadricula[fila][columna] != ) ( celda &
                        0x03 != color)
   89 0000005C E20A3003        and              r3, r10, #CELDA_COLOR
   90 00000060 E1530007        cmp              r3, r7
   91 00000064 1A000003        bne              ba_return_zero
   92 00000068         
   93 00000068         ;  Actualiza índices
   94 00000068 E0855008        add              r5, r5, r8
   95 0000006C E0866009        add              r6, r6, r9
   96 00000070         
   97 00000070 E2800001        add              r0, r0 , #1
   98 00000074         
   99 00000074 EAFFFFEB        b                ba_while
  100 00000078         
  101 00000078 E91BAFF0 
                       ba_return_zero
                               ldmdb            r11, { r4 - r10, r11, r13, r15 
}
  102 0000007C         
  103 0000007C                 END
Command Line: --debug --xref --diag_suppress=9931 --apcs=interwork --depend=.\o
bjects\conecta4_buscar_alineamiento_iter.d -o.\objects\conecta4_buscar_alineami
ento_iter.o -IC:\Keil_v5\ARM\RV31\INC -IC:\Keil_v5\ARM\CMSIS\Include -IC:\Keil_
v5\ARM\INC\Philips --predefine="__EVAL SETA 1" --predefine="__UVISION_VERSION S
ETA 526" --list=.\listings\conecta4_buscar_alineamiento_iter.lst conecta4_busca
r_alineamiento_iter.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

datos 00000000

Symbol: datos
   Definitions
      At line 1 in file conecta4_buscar_alineamiento_iter.s
   Uses
      None
Comment: datos unused
1 symbol



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

ba_return_zero 00000078

Symbol: ba_return_zero
   Definitions
      At line 101 in file conecta4_buscar_alineamiento_iter.s
   Uses
      At line 67 in file conecta4_buscar_alineamiento_iter.s
      At line 69 in file conecta4_buscar_alineamiento_iter.s
      At line 73 in file conecta4_buscar_alineamiento_iter.s
      At line 75 in file conecta4_buscar_alineamiento_iter.s
      At line 86 in file conecta4_buscar_alineamiento_iter.s
      At line 91 in file conecta4_buscar_alineamiento_iter.s

ba_while 00000028

Symbol: ba_while
   Definitions
      At line 66 in file conecta4_buscar_alineamiento_iter.s
   Uses
      At line 99 in file conecta4_buscar_alineamiento_iter.s
Comment: ba_while used once
codigo 00000000

Symbol: codigo
   Definitions
      At line 16 in file conecta4_buscar_alineamiento_iter.s
   Uses
      None
Comment: codigo unused
conecta4_buscar_alineamiento_asm_iter 00000000

Symbol: conecta4_buscar_alineamiento_asm_iter
   Definitions
      At line 37 in file conecta4_buscar_alineamiento_iter.s
   Uses
      At line 18 in file conecta4_buscar_alineamiento_iter.s
Comment: conecta4_buscar_alineamiento_asm_iter used once
4 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

CELDA_COLOR 00000003

Symbol: CELDA_COLOR
   Definitions
      At line 11 in file conecta4_buscar_alineamiento_iter.s
   Uses
      At line 89 in file conecta4_buscar_alineamiento_iter.s
Comment: CELDA_COLOR used once
CELDA_VACIA 00000004

Symbol: CELDA_VACIA
   Definitions
      At line 10 in file conecta4_buscar_alineamiento_iter.s
   Uses
      At line 84 in file conecta4_buscar_alineamiento_iter.s
Comment: CELDA_VACIA used once
FALSE 00000000

Symbol: FALSE
   Definitions
      At line 13 in file conecta4_buscar_alineamiento_iter.s
   Uses
      None
Comment: FALSE unused
NUM_COLUMNAS 00000007

Symbol: NUM_COLUMNAS
   Definitions
      At line 4 in file conecta4_buscar_alineamiento_iter.s
   Uses
      At line 8 in file conecta4_buscar_alineamiento_iter.s
      At line 74 in file conecta4_buscar_alineamiento_iter.s

NUM_FILAS 00000006

Symbol: NUM_FILAS
   Definitions
      At line 3 in file conecta4_buscar_alineamiento_iter.s
   Uses
      At line 7 in file conecta4_buscar_alineamiento_iter.s
      At line 68 in file conecta4_buscar_alineamiento_iter.s

PADDING_COL 00000001

Symbol: PADDING_COL
   Definitions
      At line 6 in file conecta4_buscar_alineamiento_iter.s
   Uses
      At line 8 in file conecta4_buscar_alineamiento_iter.s
Comment: PADDING_COL used once
PADDING_FIL 00000001

Symbol: PADDING_FIL
   Definitions
      At line 5 in file conecta4_buscar_alineamiento_iter.s
   Uses
      At line 7 in file conecta4_buscar_alineamiento_iter.s
Comment: PADDING_FIL used once
TAM_COLS 00000008



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols


Symbol: TAM_COLS
   Definitions
      At line 8 in file conecta4_buscar_alineamiento_iter.s
   Uses
      None
Comment: TAM_COLS unused
TAM_FILS 00000007

Symbol: TAM_FILS
   Definitions
      At line 7 in file conecta4_buscar_alineamiento_iter.s
   Uses
      None
Comment: TAM_FILS unused
TRUE 00000001

Symbol: TRUE
   Definitions
      At line 14 in file conecta4_buscar_alineamiento_iter.s
   Uses
      None
Comment: TRUE unused
10 symbols
347 symbols in table
